(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[0],{101:function(t,e,n){t.exports={wrapper:"App_wrapper__cZgHU",content:"App_content__1Ji9r"}},155:function(t,e,n){},156:function(t,e,n){t.exports={header:"Login_header__4kDTU",content:"Login_content__2Ed3D",menu__list:"Login_menu__list__12VVa"}},164:function(t,e,n){},187:function(t,e,n){},38:function(t,e,n){t.exports={header:"Header_header__3fmEq",content:"Header_content__1oUk_",menu__list:"Header_menu__list__2eFzU"}},45:function(t,e,n){},486:function(t,e,n){t.exports={header:"Users_header__3HteK",content:"Users_content__AcXzX",menu__list:"Users_menu__list__211Ka"}},487:function(t,e,n){"use strict";n.r(e);var c=n(1),r=n(20),i=n.n(r),o=(n(164),n(13)),a=n(10),u=n(38),s=n.n(u),l=n(4),d=n(154),j=n.n(d).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"56368f5e-d40b-4fac-aeed-68f5468273d9"}}),f=function(t){return j.get("profile/status/".concat(t)).then((function(t){return t.data}))},b=function(t){return j.put("profile/status",{status:t}).then((function(t){return t.data}))},h=function(t){return j.get("profile/".concat(t)).then((function(t){return t.data}))},O=function(t){var e=new FormData;return e.append("image",t),j.put("profile/photo",e,{headers:{"Content-Type":"multipart/form-data"}})},p=function(t){return j.put("/profile",t).then((function(t){return t.data}))},m=function(){return j.get("/auth/me").then((function(t){return t.data}))},g=function(t,e,n,c){return j.post("/auth/login",{email:t,password:e,rememberMe:n,captcha:c}).then((function(t){return t.data}))},x=function(){return j.delete("/auth/login").then((function(t){return t.data}))},_=function(){return j.get("/security/get-captcha-url").then((function(t){return t.data}))},v=function(t,e){return j.get("/users?count=".concat(t,"&page=").concat(e)).then((function(t){return t.data}))},S=function(t){return j.post("/follow/".concat(t)).then((function(t){return t.data}))},w=function(t){return j.delete("/follow/".concat(t)).then((function(t){return t.data}))},C="SET_AUTHORIZED",y="SET_DATA",z="SET_CAPTCHA",I={authorized:!1,data:{id:null,email:null,login:null},captchaUrl:null},E=function(t){return{type:C,authorized:t}},T=function(t){return{type:y,data:t}},U=function(){return function(t){m().then((function(e){e.resultCode||(t(E(!0)),t(T(e.data)))}))}},P=function(){return function(t){_().then((function(e){var n;t((n=e.url,{type:z,captchaUrl:n}))}))}},A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case C:return Object(l.a)(Object(l.a)({},t),{},{authorized:e.authorized});case y:return Object(l.a)(Object(l.a)({},t),{},{data:e.data});case z:return Object(l.a)(Object(l.a)({},t),{},{captchaUrl:e.captchaUrl});default:return t}},N=n(2),k=Object(o.b)((function(t){var e;return{authorized:t.auth.authorized,login:null===(e=t.auth.data)||void 0===e?void 0:e.login}}),{logout:function(){return function(t){x().then((function(e){e.resultCode||(t(E(!1)),t(T(null)))}))}}})((function(t){return Object(N.jsx)("div",{className:s.a.header,children:Object(N.jsxs)("div",{className:s.a.content,children:[Object(N.jsx)("div",{className:s.a.logo,children:Object(N.jsx)("img",{src:"",alt:""})}),t.authorized?Object(N.jsxs)("div",{children:[t.login," ",Object(N.jsx)("button",{onClick:t.logout,children:"Logout"})]}):Object(N.jsx)(a.b,{to:"/login",children:"Login"}),Object(N.jsx)("div",{className:s.a.menu,children:Object(N.jsxs)("ul",{className:s.a.menu__list,children:[Object(N.jsx)("li",{}),Object(N.jsx)("li",{}),Object(N.jsx)("li",{}),Object(N.jsx)("li",{})]})}),Object(N.jsx)("div",{className:s.a.controls})]})})})),B=n(59),L=n.n(B),D=Object(o.b)((function(t){var e;return{myId:null===(e=t.auth.data)||void 0===e?void 0:e.id}}),null)((function(t){return Object(N.jsx)("div",{className:L.a.sideBar,children:Object(N.jsxs)("ul",{className:L.a.sideBar__list,children:[Object(N.jsx)("li",{className:L.a.sideBar__item,children:Object(N.jsx)(a.b,{to:"/profile/".concat(t.myId),children:"\u041c\u043e\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"})}),Object(N.jsx)("li",{className:L.a.sideBar__item,children:Object(N.jsx)(a.b,{to:"/users",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"})})]})})})),F=n(7),J=n(101),M=n.n(J);function H(t){return t.profilePage.status}function K(t){return t.profilePage.profile.photos.large}var R=n(74),V=n(73),Z=n(45),X=n.n(Z),Q=function(t){var e=t.contactTitle,n=t.contactValue;return Object(N.jsxs)("div",{children:[e,":",n]})},W=function(t){var e=t.profile,n=t.isOwner,c=t.setEditMode;return Object(N.jsxs)("div",{className:X.a.userData,children:[n&&Object(N.jsx)("button",{onClick:function(){c(!0)},children:"Edit"}),Object(N.jsxs)("div",{children:["\u0418\u043c\u044f: ",e.fullName]}),Object(N.jsxs)("div",{children:["\u0418\u0449\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0443: ",e.lookingForAJob?e.lookingForAJobDescription:"\u043d\u0435\u0442"]}),Object(N.jsxs)("div",{children:[Object(N.jsx)("b",{children:"About me"}),": ",e.aboutMe]}),Object(N.jsxs)("div",{children:["Contacts:",Object.keys(e.contacts).map((function(t){return Object(N.jsx)(Q,{contactTitle:t,contactValue:e.contacts[t]},t)}))]})]})},q=n(11),G=function(t){var e=t.profile,n=t.onSubmit;return Object(N.jsx)(q.b,{onSubmit:n,children:function(t){var n=t.handleSubmit;return Object(N.jsxs)("form",{onSubmit:n,children:[Object(N.jsx)("button",{children:"Save"}),Object(N.jsx)("div",{children:"\u0418\u043c\u044f:"}),Object(N.jsx)(q.a,{component:"input",name:"fullName"}),Object(N.jsx)("div",{children:"\u0418\u0449\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0443:"}),Object(N.jsx)(q.a,{component:"input",type:"checkbox",name:"lookingForAJob"}),Object(N.jsx)(q.a,{component:"input",name:"lookingForAJobDescription"}),Object(N.jsxs)("div",{children:[Object(N.jsx)("b",{children:"About me"}),":"]}),Object(N.jsx)(q.a,{component:"input",name:"aboutMe"}),Object(N.jsxs)("div",{children:["Contacts:",Object.keys(e.contacts).map((function(t){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{children:t}),Object(N.jsx)(q.a,{component:"input",name:"contacts."+t,defaultValue:""})]})}))]})]})}})},Y=function(t){var e=Object(c.useState)(!1),n=Object(V.a)(e,2),r=n[0],i=n[1];return Object(N.jsxs)("div",{className:X.a.profileInfo,children:[Object(N.jsx)("div",{className:X.a.profileInfo__ava,children:Object(N.jsx)("img",{src:t.img||"https://media-exp1.licdn.com/dms/image/C4D0BAQEtfT1atapjcA/company-logo_200_200/0/1549289107066?e=2159024400&v=beta&t=U4SnZcPJonK7eHfgel57b5ktyTnlKLxDT3B9w0E5_PU",alt:""})}),t.isOwner&&Object(N.jsx)("input",{type:"file",onChange:function(e){e.target.files.length&&t.savePhoto(e.target.files[0])}}),r?Object(N.jsx)(G,{profile:t.profile,onSubmit:function(e){t.updateProfile(e,t.myId),i(!1)}}):Object(N.jsx)(W,{isOwner:t.isOwner,profile:t.profile,setEditMode:i})]})},$=n(155),tt=n.n($),et=(n(46),n(187),function(t){var e=t.onSubmit,n=t.onBlur;return Object(N.jsx)(q.b,{onSubmit:e,onBlur:n,children:function(t){var e=t.handleSubmit,n=t.onBlur;return Object(N.jsx)("form",{onSubmit:e,children:Object(N.jsx)(q.a,{component:"input",name:"status",onBlur:n})})}})}),nt=function(t){var e=Object(c.useState)(!1),n=Object(V.a)(e,2),r=n[0],i=n[1];return r?Object(N.jsx)(et,{onBlur:function(e){i(!1),function(e){t.updateStatus(e.currentTarget.defaultValue)}(e)},onSubmit:function(e){t.updateStatus(e.status)},status:t.status}):Object(N.jsx)("div",{onDoubleClick:function(){i(!0)},children:t.status})},ct=["img"],rt=function(t){var e=t.img,n=Object(R.a)(t,ct),r=n.match.params.userId;return Object(c.useEffect)((function(){n.getStatus(r),n.getAuthorized(),n.getProfile(r)}),[n.status,n.authorized,e,r]),Object(N.jsxs)("div",{className:tt.a.profile,children:[Object(N.jsx)(nt,Object(l.a)({},n)),Object(N.jsx)(Y,{img:e,isOwner:r==n.myId,myId:n.myId,savePhoto:n.savePhoto,profile:n.profile,updateProfile:n.updateProfile})]})},it="SET_STATUS",ot="SET_IMG",at="SET_PROFILE",ut={status:"",img:"",profile:{userId:null,lookingForAJob:null,lookingForAJobDescription:null,fullName:null,contacts:{github:null,vk:null,facebook:null,instagram:null,twitter:null,website:null,youtube:null,mainLink:null},photos:{small:null,large:null}}},st=function(t){return{type:it,newStatus:t}},lt=function(t){return function(e){h(t).then((function(t){t.resultCode||e({type:at,profile:t})}))}},dt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case it:return Object(l.a)(Object(l.a)({},t),{},{status:e.newStatus});case ot:return Object(l.a)(Object(l.a)({},t),{},{profile:Object(l.a)(Object(l.a)({},t.profile),{},{photos:Object(l.a)(Object(l.a)({},t.profile.photos),{},{large:e.img})})});case at:return Object(l.a)(Object(l.a)({},t),{},{profile:e.profile});default:return t}},jt=n(33),ft=["authorized"];function bt(t){return t.auth.authorized}var ht=Object(jt.c)(Object(o.b)((function(t){var e;return{status:H(t),authorized:bt(t),img:K(t),myId:null===(e=t.auth.data)||void 0===e?void 0:e.id,profile:t.profilePage.profile}}),{setStatus:st,getStatus:function(t){return function(e){f(t).then((function(t){e(st(t))}))}},updateStatus:function(t){return function(e){b(t).then((function(n){n.resultCode||e(st(t))}))}},getAuthorized:U,savePhoto:function(t){return function(e){O(t).then((function(t){var n;t.resultCode||e((n=t.data.large,{type:ot,img:n}))}))}},getProfile:lt,updateProfile:function(t,e){return function(n){p(t).then((function(t){t.resultCode||n(lt(e))}))}}}),(function(t){return function(e){var n=e.authorized,c=Object(R.a)(e,ft);return n?Object(N.jsx)(t,Object(l.a)({},c)):Object(N.jsx)(F.a,{to:"/login"})}}),F.f)(rt),Ot=n(156),pt=n.n(Ot),mt=function(t){return Object(N.jsx)(q.b,{onSubmit:t.onSubmit,children:function(e){var n=e.handleSubmit;return Object(N.jsxs)("form",{onSubmit:n,children:[Object(N.jsx)("div",{children:Object(N.jsx)(q.a,{component:"input",name:"email"})}),Object(N.jsx)("div",{children:Object(N.jsx)(q.a,{component:"input",name:"password"})}),Object(N.jsx)("div",{children:Object(N.jsx)(q.a,{component:"input",type:"checkbox",name:"rememberMe"})}),Object(N.jsxs)("div",{children:[t.captchaUrl&&Object(N.jsx)("img",{src:t.captchaUrl}),t.captchaUrl&&Object(N.jsx)(q.a,{component:"input",name:"captcha"})]}),Object(N.jsx)("button",{children:"Login"})]})}})},gt=Object(o.b)((function(t){var e;return{authorized:bt(t),myId:null===(e=t.auth.data)||void 0===e?void 0:e.id,captchaUrl:t.auth.captchaUrl}}),{getAuthorized:U,login:function(t,e,n,c){return function(r){g(t,e,n,c).then((function(t){t.resultCode?10==t.resultCode&&r(P()):r(U())}))}}})((function(t){return Object(c.useEffect)((function(){t.getAuthorized()}),[t.authorized]),t.authorized?Object(N.jsx)(F.a,{to:"/profile/".concat(t.myId)}):Object(N.jsx)("div",{className:pt.a.login,children:Object(N.jsx)(mt,{onSubmit:function(e){t.login(e.email,e.password,e.rememberMe,e.captcha)},captchaUrl:t.captchaUrl})})})),xt=(n(188),"SET_INITIALIZED"),_t={initialized:!1},vt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case xt:return Object(l.a)(Object(l.a)({},t),{},{initialized:e.initialized});default:return t}},St=function(t){return t.appPage.initialized},wt=(n(486),function(t){return Object(c.useEffect)((function(){}),[]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{children:Object(N.jsx)(a.b,{to:"/profile/".concat(t.userId),children:Object(N.jsx)("img",{src:t.smallImg||"https://media-exp1.licdn.com/dms/image/C4D0BAQEtfT1atapjcA/company-logo_200_200/0/1549289107066?e=2159024400&v=beta&t=U4SnZcPJonK7eHfgel57b5ktyTnlKLxDT3B9w0E5_PU",alt:""})})}),Object(N.jsxs)("div",{children:["\u0438\u043c\u044f-",t.name]}),Object(N.jsxs)("div",{children:["\u0441\u0442\u0430\u0442\u0443\u0441-",t.status]}),t.followed?Object(N.jsx)("button",{onClick:function(){return t.unfollow(t.userId)},children:"unfollow"}):Object(N.jsx)("button",{onClick:function(){return t.follow(t.userId)},children:"follow"})]})}),Ct=n(160),yt="ADD_USER",zt="SET_USERS",It="SET_TOTAL_COUNT",Et="FOLLOW",Tt="UNFOLLOW",Ut={users:[{id:null,status:null,name:null,photos:{small:null,large:null},followed:null}],totalCount:null,pageSize:7,pageNumber:1},Pt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case yt:return Object(l.a)(Object(l.a)({},t),{},{users:[].concat(Object(Ct.a)(t.users),[e.user])});case zt:return Object(l.a)(Object(l.a)({},t),{},{users:e.users});case It:return Object(l.a)(Object(l.a)({},t),{},{totalCount:e.totalCount});case Et:return Object(l.a)(Object(l.a)({},t),{},{users:t.users.map((function(t){return t.id===e.userId?Object(l.a)(Object(l.a)({},t),{},{followed:!0}):Object(l.a)({},t)}))});case Tt:return Object(l.a)(Object(l.a)({},t),{},{users:t.users.map((function(t){return t.id===e.userId?Object(l.a)(Object(l.a)({},t),{},{followed:!1}):Object(l.a)({},t)}))});default:return t}},At=Object(o.b)((function(t){return{users:t.usersPage.users,totalCount:t.usersPage.totalCount,pageSize:t.usersPage.pageSize,pageNumber:t.usersPage.pageNumber}}),{getUsers:function(t,e){return function(n){v(t,e).then((function(t){var e,c;n((e=t.items,{type:zt,users:e})),n((c=t.totalCount,{type:It,totalCount:c}))}))}},follow:function(t){return function(e){S(t).then((function(n){n.resultCode||e(function(t){return{type:Et,userId:t}}(t))}))}},unfollow:function(t){return function(e){w(t).then((function(n){n.resultCode||e(function(t){return{type:Tt,userId:t}}(t))}))}}})((function(t){Object(c.useEffect)((function(){t.getUsers(t.pageSize,t.pageNumber)}),[]);for(var e=Math.ceil(t.totalCount/t.pageSize),n=[],r=1;r<=e;r++)n.push(r);return Object(N.jsxs)(N.Fragment,{children:[n.map((function(e){return Object(N.jsx)("span",{onClick:function(){return t.getUsers(t.pageSize,e)},children:e})})),t.users.map((function(e){return Object(N.jsx)(wt,{smallImg:e.photos.small,followed:e.followed,status:e.status,name:e.name,follow:t.follow,unfollow:t.unfollow,userId:e.id})}))]})}));var Nt=Object(o.b)((function(t){return{initialized:St(t)}}),{getInitialized:function(){return function(t){var e=t(U());Promise.all([e]).then((function(){t({type:xt,initialized:!0})}))}}})((function(t){return Object(c.useEffect)((function(){t.getInitialized()}),[t.initialized]),t.initialized?Object(N.jsxs)("div",{className:M.a.wrapper,children:[Object(N.jsx)(k,{}),Object(N.jsx)(D,{}),Object(N.jsxs)("div",{className:M.a.content,children:[Object(N.jsx)(F.b,{path:"/profile/:userId?",render:function(){return Object(N.jsx)(ht,{})}}),Object(N.jsx)(F.b,{path:"/login",render:function(){return Object(N.jsx)(gt,{})}}),Object(N.jsx)(F.b,{path:"/users",render:function(){return Object(N.jsx)(At,{})}})]})]}):Object(N.jsx)("div",{children:"\u043d\u0435\u0445\u0435\u0440\u0430 \u043d\u0435\u0442\u0443"})})),kt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,488)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,i=e.getLCP,o=e.getTTFB;n(t),c(t),r(t),i(t),o(t)}))},Bt=n(159),Lt=Object(jt.b)({profilePage:dt,auth:A,appPage:vt,usersPage:Pt}),Dt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||jt.c,Ft=Object(jt.d)(Lt,Dt(Object(jt.a)(Bt.a)));i.a.render(Object(N.jsx)(a.a,{children:Object(N.jsx)(o.a,{store:Ft,children:Object(N.jsx)(Nt,{})})}),document.getElementById("root")),kt()},59:function(t,e,n){t.exports={sideBar:"SideBar_sideBar__2hCTL",sideBar__list:"SideBar_sideBar__list__1CfER"}}},[[487,1,2]]]);
//# sourceMappingURL=main.185bcb55.chunk.js.map